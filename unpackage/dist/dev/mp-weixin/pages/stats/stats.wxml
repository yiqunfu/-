<view class="stats-page data-v-162bebc6"><view class="todo-stats-card data-v-162bebc6"><text class="card-title data-v-162bebc6">待办完成情况</text><view class="todo-stats-row data-v-162bebc6"><view class="stats-item data-v-162bebc6"><text class="stats-num data-v-162bebc6">{{totalTodo}}</text><text class="stats-label data-v-162bebc6">总待办</text></view><view class="stats-item data-v-162bebc6"><text class="stats-num done-num data-v-162bebc6">{{doneTodo}}</text><text class="stats-label data-v-162bebc6">已完成</text></view><view class="stats-item data-v-162bebc6"><text class="stats-num data-v-162bebc6">{{doneRateFormatted}}</text><text class="stats-label data-v-162bebc6">完成率</text></view></view></view><view class="chart-tabs data-v-162bebc6"><text data-event-opts="{{[['tap',[['switchChart',['pie']]]]]}}" class="{{['data-v-162bebc6',(currentChart==='pie')?'active':'']}}" bindtap="__e">心情占比（饼图）</text><text data-event-opts="{{[['tap',[['switchChart',['bar']]]]]}}" class="{{['data-v-162bebc6',(currentChart==='bar')?'active':'']}}" bindtap="__e">每日心情（柱形图）</text><text data-event-opts="{{[['tap',[['switchChart',['schedule']]]]]}}" class="{{['data-v-162bebc6',(currentChart==='schedule')?'active':'']}}" bindtap="__e">心情课表</text></view><block wx:if="{{!hasDiaryData}}"><view class="empty-tip data-v-162bebc6"><text class="data-v-162bebc6">暂无日记数据，快去记录你的心情吧～</text></view></block><block wx:else><block wx:if="{{currentChart==='pie'}}"><view class="chart-container data-v-162bebc6"><qiun-data-charts vue-id="a15be400-1" type="pie" chartData="{{pieChartData}}" width="700rpx" height="400rpx" opts="{{pieChartOpts}}" class="data-v-162bebc6" bind:__l="__l"></qiun-data-charts></view></block><block wx:else><block wx:if="{{currentChart==='bar'}}"><view class="chart-container data-v-162bebc6"><qiun-data-charts vue-id="a15be400-2" type="column" chartData="{{barChartData}}" width="700rpx" height="400rpx" opts="{{barChartOpts}}" class="data-v-162bebc6" bind:__l="__l"></qiun-data-charts></view></block><block wx:else><block wx:if="{{currentChart==='schedule'}}"><view class="schedule-container data-v-162bebc6"><view class="schedule-header data-v-162bebc6"><block wx:for="{{weekdays}}" wx:for-item="weekday" wx:for-index="__i0__" wx:key="*this"><text class="weekday data-v-162bebc6">{{weekday}}</text></block></view><view class="schedule-grid data-v-162bebc6"><block wx:for="{{$root.l1}}" wx:for-item="day" wx:for-index="dayIdx" wx:key="dayIdx"><view class="day-column data-v-162bebc6"><block wx:for="{{day.l0}}" wx:for-item="slot" wx:for-index="slotIdx" wx:key="slotIdx"><view class="mood-slot data-v-162bebc6" style="{{'background-color:'+(slot.m0)+';'}}"><text class="mood-text data-v-162bebc6">{{scheduleMoods[dayIdx][slotIdx]||'-'}}</text></view></block></view></block></view><view class="mood-legend data-v-162bebc6"><block wx:for="{{moodColorMap}}" wx:for-item="color" wx:for-index="mood" wx:key="mood"><view class="legend-item data-v-162bebc6"><view class="color-block data-v-162bebc6" style="{{'background-color:'+(color)+';'}}"></view><text class="data-v-162bebc6">{{mood}}</text></view></block></view></view></block></block></block></block></view>